For the weather website, napervilleweather.net, this repository holds
the php scripts that generate the web pages.

The scripts came from the saratoga-weather.org website.  I added my own customizations.

Added Space Weather from http://www.642weather.com/weather/scripts-space-weather.php

Added Google Analytics to top.php

Added Weather Underground Historical Data page from jcweather.us using http://saratoga-weather.org/wxtemplates/wxwuhistory.zip

Added El Dorado Weather NOAA Animated Ridge Radar Script http://www.eldoradocountyweather.com/scripts/weather-scripts.php
 - I customized it for Chicago

Added Air Quality from http://relayweather.com
 - http://www.relayweather.com/downloads.php
 - pulls data from http://www.airnow.gov/

Added CWOP CWOP Statistics Viewer from  http://relayweather.com
 - http://www.relayweather.com/downloads.php
 - scrapes content from http://weather.gladstonefamily.net/
 - Thanks to PHillip Gladstone!

Added river levels for the Chicago River
 - http://eastmasonvilleweather.com/downloads.php
 - content from Advanced Hydrologic Prediction Service http://water.weather.gov/ahps/
 - Thanks to Dennis at East Masonville Weather 
 - in ./River directory is a README with a crontab script, runs every 15 minutes

Added support for WXSIM.  
 - just tweaked a line in Settings.php
 - every 6 hours a new plaintext.txt file gets uploaded
 - a "WXSIM" references shows on the home page and under the forecast menu
 - on my weather PC, I added WXSIM, WXSIMATE, and WRET. 
 - I also added a new scheduler ($30): http://www.splinterware.com/download/index.htm
 - The scheduler wakes up WXSIMATE, collects data, wakes up WXSIM, generates a forecast, plaintext.txt
 - fling uploads it to my home directory
 - The wxstatus page detects whether the plaintext file is fresh
 - Thanks to  Tom Ehrensperger for customizing my setup

Added support for 3in1
 - http://www.nordicweather.net/downloads/?2  version 4.1
 - Thanks to Henkka at Nordic Weather for all the hard work AND creativity
 - Setup tips found here: http://www.weather-watch.com/smf/index.php/board,56.0.html
 - http://napervilleweather.net/wxsim3in1/wxall.settings.php:
$wxallmainfolder = '';   <- for use with wxsim3in1/sivu2.php testing
$wxallmainfolder = 'wxsim3in1/';
$wxallmainfolderfull = '/home/weather/public_html/saratoga/wxsim3in1/';
$plaintextfolderfull = '/home/weather/public_html/saratoga/';
$lastretfile = '/home/weather/public_html/saratoga/lastret.txt';
$plaintextfile = '/home/weather/public_html/saratoga/plaintext.txt';
# Graphicons. To Do: move these to my local server
$wxallwindicondir = "http://static.nordicweather.net/nordic/images/barbs2/";
$wxallicondir = "http://static.nordicweather.net/nordic/images/dotvoid_30/";
$timezone = "America/Chicago";      # Your timezone
$lat = 41.xxxx;
$long = -88.xxxx;
$timeFormat = "d.m.Y H:i";          # Timeformat
$updatehrs = array(7,11,15,21);       # Hours when wxsim runs
$uploadupdate = 25;                   # minutes past full hour for upload time
$puoms = array('Â°F','in','mph','in','in','mi');
$mainwidth = "625";     # to fit in saratoga template width


 - FYI: the files lastret.txt and plaintext.txt are generated by WXSIM/WXSIMATE/WRET running on my weather PC and uploaded every several hours.
 - create graphlog.txt and chmod it to 666; this file gets created/recreated by PHP scripts whenever the 3in1 page is rendered.  A JS-based script in the browser grabs this file, AJAX style, and then draws the graph pulling in the well known Highcharts library
 - on weather server, run WRET and verify setup matches wret.png
   -- I don't do soil
   -- I set F (not C) for temperature
 - created wxsim3in1.php from wxnewpage.php
 - Looks like width of 625 means 5 day forecast instead of squishing 7 days

Added Juneau County Weather's Forecast Compare for WXsim
 - http://jcweather.us/scripts.php
 - http://jcweather.us/forecast-compare.zip?1333311217
 - installed raw download files in home directory ~/public_html/saratoga/

Tweaked forecast-compare files
 - advforecaset2.php:  make sure $fileName (~line 99) is right.  test http://napervilleweather.net/advforecast2.php.  Verify correct, not blank
 - fc-config.php: $fileLoc="" and $analdays=5
 - fc-LogTemps.php:
   -- create blank fc-temps.txt chmod 777
   -- if using VWS, be sure to setup testtags.php (see fc-readme.txt)
   -- if using VWS, make sure to include 
      $entry[0] = $maxtempyest;
      $entry[1] = $mintempovernight;
   -- and comment out code 33,36
 - create blank forecastAM.log and forecastPM.log, chmod 777
 - crontab
# 7am and 8am GMT-5, 7am->12, 8am->13
0  12 * * * wget -q http://napervilleweather.net/fc-LogTemps.php
0  13 * * * wget -q http://napervilleweather.net/forecast-compare-include.php?log\&config=am
# 7am and 8pm, 7pm->0, 8pm->1
0 0 * * * wget -q http://napervilleweather.net/fc-LogTemps.php
0 1 * * * wget -q http://napervilleweather.net/forecast-compare-include.php?log\&config=pm

Updating to current Saratoga version new files from VWS.zip 4/2/12
 - new VWS-def.php - new VWS.def files have local rain override for METAR conds, pure replace
 - Settings-weather.php
$SITE['graphImageDir']  = './vwsimages/';
$SITE['wflashdir']      = '../WxFlash/Data/';
$SITE['graphImageDir']  = './vwsimages/';
$SITE['conditionsMETAR'] = 'KDPA'; // dist=11 mi (18 km), dir=NW, Chicago/Dupage, Illinois, USA elev=231, dated=09-NOV-04
$SITE['overrideRain']   = true;
 - downloaded http://saratoga-weather.org/wxtemplates/VWS-plugin.zip
 - verified on http://napervilleweather.net/wxmetar.php

Updating to current Saratoga version V3.89 Base-USA
 - http://saratoga-weather.org/wxtemplates/Base-USA.zip
 - UV and Weather Cat
 - wxuvforecast.php updated
 - get-UV-forecast-inc.php updated
 - ajaxWCTwx.js new
 - flyout-menu.xml updates for WCT weather software.  I did not port
 - include-wxstatus.php updated
 - wxgraphs.php updated with one customization
$graphImageDim = 'vwsimages/';
 - Thermometer.php updated with one customerizion
$wflashDir     = '../WxFlash/Data/';
 - verify http://napervilleweather.net http://napervilleweather.net/wxstatus.php http://napervilleweather.net/wxuvforecast.php http://napervilleweather.net/wxgraphs.php

Updating forecast icons from www.meteotreviglio.com
 - http://www.meteotreviglio.com/downloads/ajax_forecast/forecast.zip
 - update Settings.php
$SITE['fcsticonstype']= '.gif'; 
 - www.meteotreviglio.com/downloads/ajax_images/ajax_animated_icons.rar
 - update wxmetar.php   jpg->gif
 - copy/overwrite .gif files into ajax-images/
 - Verify
   http://napervilleweather.net/wxsimforecast.php
   http://napervilleweather.net/wxforecast.php

Added 
 - sitemap.xml (turned on Google webmaster tools)
 - snapshot of current crontab -l output

Added Midwestern Weather Network Meso-map
 - http://www.midwesternweather.net/MWWN-code.php#homepage
 - http://www.midwesternweather.net/MWWN-mesomap.zip
 - created directory MWWN-mesomap
 - copied zip file into directory
 - chmod 777 MWWN-conditions.txt
 - edit MWWN-mesomap/MWWN-mesomap.php
$LinksFile = "./MWWN-mesomap/MWWN-stations-cc.txt"; 
$Graphic = "./MWWN-mesomap/MWWN_meso.jpg"; 
$ThisStation = "NapervilleWeather.net"; 
 - in home dir copy wxnewpage.php -> MWWN.php
 - edit MWWN.php following: 
   http://www.midwesternweather.net/MWWN-code.php#PHPprocess
 - add a menu item to flyout-menu.xml
 - in menubar.php, add logo to home page, make link
<a href="MWWN.php">
<img src="MWWN-mesomap/MWWN_roundsmall.png"
alt="Midwestern Weather Network"
title="Midwestern Weather Network"
width="90" height="90" />
</a>

Added Wildwood Naturist's NOAA Report generators
 - Script Developed by Murry Conarroe of Wildwood Weather. Thanks!
 - http://weather.wildwoodnaturist.com/downloadsCVW.php
 - Daily Records for VWS
   http://weather.wildwoodnaturist.com/ccount/click.php?id=18
   wxnoaarecords.php: $path_dailynoaa = "./noaa/";
 - continue with Detail/Summary Scripts 

Fixed Midwestern Weather Network Meso-map
 - weather condition images not displaying correctly on member station table
 - fixed pathes in MWWN-mesomap.php
$windArrowDir = './MWWN-mesomap/MWWN-images/';
$condIconsDir = './MWWN-mesomap/MWWN-images/';

Added another Wildwood Naturist's NOAA Report
 - Details and Summary Files
 - http://weather.wildwoodnaturist.com/ccount/click.php?id=21
 - must be put in home directory, I tried to create a sub dir
 - add to menu under Reports:  Detail & Summary Reports
   http://napervilleweather.net/wxtempdetail.php?r=wxtempdetail.php

Added yet another WIldwood Naturist's NOAA Graphing tool
 - install jpgraph following instructions at 
   http://www.weather-watch.com/smf/index.php/topic,27489.0.html
 - http://jpgraph.net/download/download.php?p=5 -> jpgraph-3.5.0b1
 - copy jpgraph-3.5.0b1/src contents to ./jpgraph
 - create ./jpgraph/ttf then copy arialbd.ttf and arial.ttf from windows fonts
 - edit ./jpgraph/jpg-config.inc.php
 define('TTF_DIR','/home/weather/public_html/saratoga/jpgraph/ttf/');
 - copy http://weather.wildwoodnaturist.com/ccount/click.php?id=24 -> orig/wxnoaagraphs.zip
 - copy the six files to ./
 - follow insturctions at http://www.wxforum.net/index.php?topic=14082.0
 - for  wxnoaarain.php wxnoaatemps.php wxnoaawind.php
$loc = "./noaa/";
$first_year_of_data = "2010"; 
 - create wxnoaagraphs.php (from wxnewpage.php).  Put into "Main-copy"
<center>
    <h2> Daily Interval Temperature Graph</h2>
    <img src="wxnoaatemps.php" alt="Temperature Graph" ></img>
    <h2> Monthly Interval Rain Bargraph</h2>
    <img src="wxnoaarain.php" alt="Rain Graph" ></img>
    <h2> Monthly Interval Wind Graph</h2>
    <img src="wxnoaawind.php" alt="Wind Graph" ></img>
</center>
 - update flyout-menu.xml
 - put noaadata.csv in ./cache, chmod 777

Fix Forecast.  NWS web page changed 7/3/12
 - advforecast2.php v3.04
 - http://saratoga-weather.org/wxtemplates/updates.php#updates
 - used file as is, over wrote old file; it seemed to work.  
 - Tested with WXSIM; seemed ok.
 - I hand editted the previous version:
96c96
<  $NOAAZone = 'CAZ513';  // change this line to your NOAA warning zone.
---
>  $NOAAZone = 'ILZ013';  // change this line to your NOAA warning zone.
98c98,99
<  $fileName = "http://forecast.weather.gov/MapClick.php?CityName=Saratoga&state=CA&site=MTR&textField1=37.2639&textField2=-122.022&e=1&TextType=2";//
---
>  //$fileName = "http://forecast.weather.gov/MapClick.php?CityName=Saratoga&state=CA&site=MTR&textField1=37.2639&textField2=-122.022&e=1&TextType=2";//
>  $fileName = "http://forecast.weather.gov/MapClick.php?CityName=Naperville&state=IL&site=LOT&textField1=41.7626&textField2=-88.1543&e=0&TextType=2";

 - The above changes don't appear to be needed.  The defaults from the 
   settings file seem to cover

Fix http://napervilleweather.net/wxnoaagraphs.php
 - It was displaying NOAA no records found
 - Fixed wxnoaacsvdata.php at line 428:
//$wxsoftware = $SITE['WXsoftware'];
$wxsoftware = 'VWS';
 - I shouldn't have to do this. WXsoftware is set in Settings file
 - Hmmm...

Add a weather station sticker
 - http://scripts.anolecomputer.com/wxgraphic/
 - http://scripts.anolecomputer.com/downloads/wxgraphic_6.3.zip
 - copy wxgraphic directory to root folder, except for *.htx files
 - copy VWS_graphicstags.htx to c:\vws\root on weather PC.  Program VWS Internet / HTML to generate VWS_graphicstags.htm along with all the other templates.  Every 10 minutes is good.
 - copy arial.ttf from my PC's windows\font directory to wxgraphic dir
 - edit config.txt
$data_file_path  = '../VWS_graphictags.htm';
$font_file = './arial.ttf';
update Title in default, avatar and banner write sections
//imagecenteredtext(90, 12, "A Title Here", 3, 10, $color2, 0);
imagecenteredtext(90, 12, "Naperville", 3, 10, $color2, 0);
//imagecenteredtext(90, 12, "A Title Here", 5, 10, $color2, 0);
imagecenteredtext(90, 12, "Naperville", 5, 10, $color2, 0);
//imagecenteredtext(250, 10, "A Title Here", 5, 14, $color2, 0);
imagecenteredtext(250, 10, "Naperville", 5, 14, $color2, 0);
//imagecenteredtext(65, 10, "Title Here", 2, 8, $color2, 0);
imagecenteredtext(65, 10, "Naperville", 2, 8, $color2, 0);
 - verify http://napervilleweather.net/wxgraphic/wxgraphic.php generates a 150x150 sticker
 - update wordpress text widget
<a href="http://NapervilleWeather.net">
<img src="http://napervilleweather.net/wxgraphic/wxgraphic.php" width="150" height="150"
alt="Naperville Weather"
title="Naperville Weather">
</a>
 - add sticker reference to about page


